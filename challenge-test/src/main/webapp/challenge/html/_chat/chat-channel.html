<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>채팅 생성</title>
  <link rel="stylesheet" href="../../css/common.css">
<link rel="stylesheet" href="../../css/member/sm-memberPage.css">
  <link rel="stylesheet" href="../../node_modules/@fortawesome/fontawesome-free/css/all.css">
  <link rel="stylesheet" href="chat.css">

</head>

<body>
<header id="header"></header>
  <div class="container">
    <div class="row">
    
    
    
    <div class="sm-box">
      <h2 class="h3">Caller - 트레이너가 채팅창 생성</h2>
        <form class="form-inline">
          <div class="form-group">
            <label class="sr-only" for="createChannelId">Channel Id</label>
            <input class="form-control" type="text" id="createChannelId" placeholder="Create and connect the channel." value="" readonly>
          </div>
          <button class="sm-btn-1" id="createChannel">
            <span class="glyphicon glyphicon-phone-alt" aria-hidden="true"></span>채팅 생성
          </button>
        </form>
        <video class="remote-video center-block" id="callerRemoteVideo"></video>
        <video class="local-video pull-right" id="callerLocalVideo"></video>
    </div>
        
        
        

    <div class="sm-box">
        <h2 class="h3">Callee - 회원이 채팅 참여</h2>
        <form class="form-inline">
          <div class="form-group">
            <label class="sr-only" for="connectChannelId">Channel Id</label>
            <input class="form-control" type="text" id="connectChannelId" placeholder="Enter the channel id." value="">
          </div>
          <button class="sm-btn-1" id="connectChannel">
            <span class="glyphicon glyphicon-earphone" aria-hidden="true"></span> 채팅 참여
          </button>
        </form>

        <video class="remote-video center-block" id="calleeRemoteVideo"></video>
        <video class="local-video pull-right" id="calleeLocalVideo"></video>
        </div>
        
        
    </div>
  </div>
<footer id="footer"></footer>
  <!--<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>-->
  <!--<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>-->
  <script src="//www.playrtc.com/sdk/js/playrtc.js"></script>
    <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
  <script src="../../js/common.js"></script>
    <script src="../../js/header/header.js"></script>
  <script src="../../js/footer/footer.js"></script>

<script>
//채널 생성하기 (Caller)
'use strict';

var createChannelButton = document.querySelector('#createChannel');
var createChannelIdInput = document.querySelector('#createChannelId');
var appCaller;

appCaller = new PlayRTC({
  projectKey: '60ba608a-e228-4530-8711-fa38004719c1',
  localMediaTarget: 'callerLocalVideo',
  remoteMediaTarget: 'callerRemoteVideo'
});

appCaller.on('connectChannel', function(channelId) {
  createChannelIdInput.value = channelId;
});

createChannelButton.addEventListener('click', function(event) {
  event.preventDefault();
  appCaller.createChannel();
}, false);

</script>
<script>

//채널 참여하기 (Callee)
 
 var connectChannelIdInput = document.querySelector('#connectChannelId');
 var connectChannelButton = document.querySelector('#connectChannel');
 var appCallee;

 appCallee = new PlayRTC({
   projectKey: '60ba608a-e228-4530-8711-fa38004719c1',
   localMediaTarget: 'calleeLocalVideo',
   remoteMediaTarget: 'calleeRemoteVideo'
 });

 connectChannelButton.addEventListener('click', function(event) {
   var channelId = connectChannelIdInput.value;

   event.preventDefault();
   if (!channelId) {
     return;
   }
   appCallee.connectChannel(channelId);
 }, false);
</script>
</body>

</html>
